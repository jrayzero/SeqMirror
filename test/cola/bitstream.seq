from cola.stream import BitStream

bs0 = BitStream(u64(6), 3)
print(bs0)
assert str(bs0) == '0b110'

s = ''
for b in bs0:
    s += str(b)
print(s)
assert s == '110'

bs0.append(u32(10), 4)
print(bs0)
assert str(bs0) == '0b1101010'

s = ''
for b in bs0:
  s += str(b)
print(s)
assert s == '1101010'

# this one should fail because 7 means the LSB->MSB bits, which excludes the first 1 (i.e. it reads as 1010101, not 1101010)
assert bs0 != BitStream(0b11010101, 7)
assert bs0 == BitStream(0b11101010, 7) # this chops off that leftmost 1, giving the correct 1101010

bs1 = BitStream(0b010111100, 63)
print(bs1)
assert str(bs1) == '0b000000000000000000000000000000000000000000000000000000010111100'
bs1.append(0b1, 1)
print(bs1)
assert str(bs1) == '0b0000000000000000000000000000000000000000000000000000000101111001'

bs1.append(0b1011, 5)
print(bs1)
assert str(bs1) == '0b000000000000000000000000000000000000000000000000000000010111100101011'
